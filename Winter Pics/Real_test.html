<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    <title>Document</title>
</head>
<body onload="DefaultScreen()">
    <center>
        <h1 id="Para1"> Weather Forecast</h1>
        <p id="inputContainer">City: <input type="text" id="cityInput"></p>
        <button type="button" onclick="GetInfo()">Click Me</button>        
        <h2 id="cityName"></h2>
    </center>
    <h3>You are in: <span id = "AN"></span> <br /></h3>
    <h4>Weather Remarks: <span id = "WR"></span> <br /></h4>
    
    <p>Date and Time: <span id = "date"></span> <br /></p>
    <p> 
        Temparature: <span id = "temp"></span> <br />
        Feels Like: <span id = "FL"></span> <br />
        Maximum Temp: <span id = "max"></span> <br />
        Wind Speed: <span id = "WS"></span> <br />
        Weather Condition: <span id = "cond"></span> <br />
        
    </p>

    <h1> Predicted weather after 6 hrs </h1>
    <p>Date and Time: <span id = "date1"></span> <br /></p>
    

    <p> 
        Temparature: <span id = "temp1"></span> <br />
        Feels Like: <span id = "FL1"></span> <br />
        Maximum Temp: <span id = "max1"></span> <br />
        Wind Speed: <span id = "WS1"></span> <br />
        Weather Condition: <span id = "cond1"></span> <br />
        
    </p>
    
    

        <script>
            let lat=Number(65);
            let lon=25;

            let today_temperature;
            let current_location;
            let date_today;
            let time_today;
            let today_wind_rate;
            let today_rainy_presentage;
            let today_forcast;
            // May be this two we can go as map or something......
            let noOfDates_to_forecast_future;//
            let future_forecast;
            let weather_remarks;

            function GetInfo() {

            var newName = document.getElementById("cityInput");
            var cityName = document.getElementById("cityName");
            cityName.innerHTML = "--"+newName.value+"--";

            fetch('https://api.openweathermap.org/data/2.5/forecast?q='+newName.value+'&appid=28ccc81c35e0d2b02668d8948dbe91d2')
            .then(response => response.json())
            .then(data => {

            //Getting the min and max values for each day
            
            min_temp= Number(data.list[0].main.temp_min - 273.15).toFixed(1)+ "°";
                //Number(1.3450001).toFixed(2); // 1.35
            

            max_temp= Number(data.list[0].main.temp_max - 273.15).toFixed(2) + "°";
            
            //------------------------------------------------------------

            
            console.log(data)


            const date = new Date();
            console.log(date);

            today_temperature= data.list[0].main.temp;
            current_location= data.city.name;
            today_wind_rate= data.list[0].wind;
            today_weather_condn = data.list[0].weather[0].description;
            date_today=data.list[0].dt_txt; 

            console.log("temperature: "+ today_temperature);
            console.log("Location: " +current_location);
            console.log(today_wind_rate);
            console.log("Weather Condition: " + today_weather_condn );
            console.log("Date and Time: "+ date_today);

            document.getElementById("date").textContent = date;

            //document.getElementById("DT").textContent = date_today;
            document.getElementById("temp").textContent = Math.floor(today_temperature-273.15).toFixed();
            document.getElementById("FL").textContent = Math.ceil(data.list[0].main.feels_like-273.15);
            document.getElementById("max").textContent = Math.ceil(data.list[0].main.temp_max-273.15);
            document.getElementById("WS").textContent = today_wind_rate.speed;
            document.getElementById("AN").textContent = current_location;
            document.getElementById("cond").textContent = data.list[0].weather[0].description;

            if (today_temperature<263){
                weather_remarks="Pretty Cold";
            } else if (today_temperature >= 263 && today_temperature <= 273.15){
                weather_remarks="moderate Cold";
            } else {
                weather_remarks="It is Summer!";
            } 

            document.getElementById("WR").textContent = weather_remarks;


            document.getElementById("date1").textContent = data.list[2].dt_txt; 


            document.getElementById("temp1").textContent = Math.ceil(data.list[2].main.temp-273.15).toFixed();
            document.getElementById("FL1").textContent = Math.ceil(data.list[2].main.feels_like-273.15);
            document.getElementById("max1").textContent = Math.ceil(data.list[2].main.temp_max-273.15);
            document.getElementById("WS1").textContent = data.list[2].wind.speed;
            document.getElementById("cond1").textContent = data.list[2].weather[0].description;
            



            })
            .catch(err => alert("Something Went Wrong: Location not Found \n Check the Spelling!!"))

            }

            function DefaultScreen(){
            document.getElementById("cityInput").defaultValue = "Oulu";
            GetInfo();
            }


    
            

        </script> 


</body>