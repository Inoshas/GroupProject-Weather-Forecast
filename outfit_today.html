<!DOCTYPE html>
<html lang="en">
<head>
    <title>Outfit_Today</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    
</head>
<body>

    <style>
        * {
         box-sizing: border-box;
            }

        body {
        font-family: Arial, Helvetica, sans-serif;
        background-size: cover;
                /*height: 55px;*/
                background-color: rgb(233, 219, 219); /* For browsers that do not support gradients */
                background-image: linear-gradient(to right, rgb(241, 236, 236), rgb(178, 175, 168), rgb(245, 245, 198), rgb(209, 235, 209), rgb(243, 243, 249));     
        }

        /* Style the header */
        header {
        background-color: #f9c0c0;
        padding: 15px;
        text-align: center;
        font-size: 30px;
        color: rgb(8, 3, 3);
        }

        /* Create two columns/boxes that floats next to each other */
   
        

        body {
        background-size: cover;
        /*height: 55px;*/
        background-color: red; /* For browsers that do not support gradients */
        background-image: linear-gradient(to right, rgb(241, 236, 236), rgb(178, 175, 168), rgb(245, 245, 198), rgb(209, 235, 209), rgb(243, 243, 249));
        }
/*
      #myContainer {
      width: 1070px;
      height: 400px;
      position: relative;
      background: rgb(241, 241, 135);
      }
      #myAnimation {
        width: 50px;
        height: 50px;
        position: absolute;
        background: red;
      }
      */

      #firstsetup {
        position: relative;
        font-size: 30px;
        display: inline-block
      }
      #secondsetup{
        text-align: center;
        font-size: 20px;
      }
     

     </style >

     
    <header>
    <h1 id="head_main">Outfit Today</h1>
    </header>


      <div class="container-fluid mt-3">
        
        <div class="row">

            <div class="col-sm-3 p-3 bg-primary text-white">
              <div id="firstsetup" >
                <p id="location1"  style="display: inline-block"> </p>  
                
                <p id="temperature"  style="display: inline-block"  ></p>
              </div>

              <div id="secondsetup">
                <p id="date1"> date goes here </p>
                <p id="time1"> Time goes here</p>
              </div>
              
              <div> 

           
                <p id="temperature" style="display: inline-block" > weather goes here</p>
                <p id="feels_like_w"> feels like weather goes here</p>
                <p id="wind_condition"> wind consition goes here</p>
                <p id="prediction"> link for Prediction for today and for week goes here</p>
                <input id="change_loc" value=" Change Location"></input>
              </div>
             

                
               <h6>Predicted weather after 6 hrs </h6>
               <p>Date and Time: <span id = "date2"></span> <br /></p>
    

              <p> 
                  Temparature: <span id = "temp1"></span> <br />
                  Feels Like: <span id = "FL1"></span> <br />
                  Maximum Temp: <span id = "max1"></span> <br />
                  Wind Speed: <span id = "WS1"></span> <br />
                  Weather Condition: <span id = "cond1"></span> <br />
                  
              </p>
    
          </div>
       

          <div class="col-sm-9 p-3 bg-dark text-white">
            <div id="header"></div>
           <div>
          
          
            <button  id="checklist" onclick="create_checklist()">Check List</button>
            <div id="myDIV" style="padding:16px;background-color:rgb(162, 21, 21)" style="display: inline-block" ></div>
          </div>

        </div>


      </div>

    


    
    
    
    
    <script>

// link html to javascript::::::::::::::::::::::::: All links goes here

        let temperature= document.getElementById("temperature")
        let location1= document.getElementById("location1")
        const date1 = document.getElementById("date1")
/*
        const head_main= document.getElementById("head_main");
        const location1= document.getElementById("location1");
        const date1 = document.getElementById("date1");
        const time1 = document.getElementById("time1");
        ;
        const feels_like_w =document.getElementById("feels_like_w");
        const wind_condition = document.getElementById("wind_condition");
        const prediction=document.getElementById("prediction") ;
        const change_loca=document.getElementById("change_loca");
        const image1 =document.getElementById("image1")
*/


// Global variable: All global variables goes here
      let today_temperature;
      let current_location;
      let date_today;
      let time_today;
      let today_wind_rate;
      let today_rainy_presentage;
      let today_forcast;
      // May be this two we can go as map or something......
      let noOfDates_to_forecast_future;//
      let future_forecast;
      //#####################################################################


// Fetching data goes here: 
// we assign them  belows:

let api_url= "https://api.openweathermap.org/data/2.5/forecast?lat=65.010211&lon=25.483722&appid=28ccc81c35e0d2b02668d8948dbe91d2";
        
        async function getISS() {
        const renponse= await fetch (api_url);
        const data= await renponse.json();

        

        //console.log(data);

        console.log(data.list[0], data.list[2],data.city);

        // Get the date with inbuild function::::::


      

        let date = new Date();
        date1.textContent = date.getDate() +"/"  +(date.getMonth()+1) +"/"+ date.getFullYear()  ;
        time1.textContent=  date.getHours() +":" + date.getMinutes()+":"+ date.getSeconds()



        today_temperature= data.list[0].main.temp -273.15;


        current_location= data.city.name;
        today_wind_rate= data.list[0].wind;
        today_weather_condn = data.list[0].weather[0].description;
        date_today=data.list[0].dt_txt; 
        console.log(date_today)

        console.log("temperature: "+ today_temperature);
        console.log("Location: " +current_location);
        console.log(today_wind_rate);
        console.log("Weather Condition: " + today_weather_condn );
        console.log("Date and Time: "+ date_today);

        //document.getElementById("date1").textContent = date;

        //document.getElementById("DT").textContent = date_today;
     
        temperature.textContent = Math.floor(today_temperature).toFixed() + " ÂºC" ; // done

        document.getElementById("feels_like_w").textContent = Math.ceil(data.list[0].main.feels_like-273.15);
        //document.getElementById("max").textContent = Math.ceil(data.list[0].main.temp_max-273.15);

        document.getElementById("wind_condition").textContent = today_wind_rate.speed; // done
        document.getElementById("location1").textContent = current_location; // done

        //document.getElementById("cond").textContent = data.list[0].weather[0].description;


       
        if (today_temperature<263){
            weather_remarks="Pretty Cold";
        } else if (today_temperature >= 263 && today_temperature <= 273.15){
            weather_remarks="moderate Cold";
        } else {
            weather_remarks="It is Summer!";
        } 

        //document.getElementById("WR").textContent = weather_remarks;
        // Prediction in 6 hours::

        document.getElementById("date2").textContent = data.list[2].dt_txt; 


        document.getElementById("temp1").textContent = Math.ceil(data.list[2].main.temp-273.15).toFixed();
        document.getElementById("FL1").textContent = Math.ceil(data.list[2].main.feels_like-273.15);
        document.getElementById("max1").textContent = Math.ceil(data.list[2].main.temp_max-273.15);
        document.getElementById("WS1").textContent = data.list[2].wind.speed;
        document.getElementById("cond1").textContent = data.list[2].weather[0].description;
        

        

    
      }

        getISS();



/*
      let api_url="https://api.openweathermap.org/data/2.5/weather?lat=65.010211&lon=25.483722&appid=2d4079dbf470ffdeb5080fbc16e098fc"; 
        //let api_url = "http://dataservice.accuweather.com/forecasts/v1/minute";65.010211, 25.483722
        async function getISS() {
            const renponse= await fetch (api_url);
            const data= await renponse.json();
            console.log(data.main);
            console.log(data.main.temp_max);
            const {main}=data.main;
            document.getElementById("temp").textContent = Math.ceil(data.main.temp-273.15);
            document.getElementById("FL").textContent = Math.ceil(data.main.feels_like-273.15);
            document.getElementById("max").textContent = Math.ceil(data.main.temp_max-273.15);
            document.getElementById("WS").textContent = data.wind.speed;

        }

            getISS();
            var SERVER_URL = "http://opendata.fmi.fi/wfs";
var STORED_QUERY_OBSERVATION = "fmi::observations::weather::multipointcoverage";
//var connection = new fi.fmi.metoclient.metolib.WfsConnection();


            var parser = new Metolib.WfsRequestParser();
        parser.getData({
            url : SERVER_URL,
            storedQueryId : STORED_QUERY_OBSERVATION,
            requestParameter : "td",
            // Integer values are used to init dates for older browsers.
            // (new Date("2013-05-10T08:00:00Z")).getTime()
            // (new Date("2013-05-12T10:00:00Z")).getTime()
            begin : new Date(1368172800000),
            end : new Date(1368352800000),
            timestep : 60 * 60 * 1000,
            sites : "Helsinki",
            callback : function(data, errors) {
                // Handle the data and errors object in a way you choose.
                // Here, we delegate the content for a separate handler function.
                handleCallback(data, errors);
            }
        });



/*
      let jsonStr = JSON.stringify({'now': new Date()}) ;   
      console.log(jsonStr);


      const x = document.getElementById("demo");
      function getLocation() {
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(showPosition);
        } else {
          x.innerHTML = "Geolocation is not supported by this browser.";
        }
      }

      function showPosition(position) {
        console.log("Latitude: " + position.coords.latitude +
        "<br>Longitude: " + position.coords.longitude);
      }
      
      getLocation()

/*

      function getGeo() {
        navigator.geolocation.getCurrentPosition(getCurrentLoc)
    }

    function getCurrentLoc(data) {
        var lat,lon;
        lat=data.coords.latitude;
        lon=data.coords.longitude;
        getLocalWeather(lat,lon)
        initMap(lat,lon)
    }
    */

 // fetch the data:

 // how to store data::: It can be array, map or anything: lets assume we assigned them here 

 
        
        current_location;
        date_today;
        time_today;
        today_wind_rate;
        today_rainy_presentage;
        today_forcast;
      // May be this two we can go as map or something......
        noOfDates_to_forecast_future;//
        future_forecast;



        // lets make an object with different cloths:
       const array_cloths =
          { too_cold: ["Thermal pant", "Pant" , "Long sleeve", "Inner overall", "Socks", "Winter jacket"  ,"Winter pant"  ,"Wollen socks","Winter boots" ,"Winter cap" , "Scarf" , "Mittens", "Winter gloves"] ,
            pretty_cold: ["Long sleeve", "Thermal pant","Inner overall", "Socks",   "Winter jacket" , "Winter pant" , "Wollen socks"  , "Winter boots" ,   "Winter cap" ,  "Scarf" ,  "Winter gloves" ],
            around_zero : ["Short sleeve", "Inner overall", "Socks",   "Winter jacket" , "Winter pant" , "Wollen socks"  , "Winter boots" , "Off seasonal cap" ,  "Off seasonal gloves" ] ,
            offseason_feel :  ["Short sleeve", "Socks",  "Inner overall", "Offseasonal jacket"  , "Cap"  , "Shoes" ], 
            summary_mood : [ "Short sleeve", "Short",  "Inner overall",   , "Cap"  , "Sandles" ],
            too_hot : [ "Short sleeve", "Short",  "Inner overall",   , "Cap"  , "Sandles"],
            rain_cloths : [ "Water proof pants" , "Rain boots" , " Rain gloves"],
            sun_shine : ["Sun glasses"]
           }  ;

           // 
          
        

        // Define enum for rain_presentage:

        // Define enum for wind_rate:

 // process the data:::
 // This function return cloths need to wear depend on the weather:
      function check_temperature(){  

          switch(true){

      // below -25 :: I add this to put some warning message
            case today_temperature <-25:
              return array_cloths.too_cold;
              console.log("we need another warning message or something for this.")
              break;
      //below -15
            case today_temperature <-15:
              return array_cloths.too_cold;
              break;

      // between -5 and -15
            case today_temperature<-5:
            return array_cloths.pretty_cold;
           // return array_cloths.test;
            break;

      // +5 to -5 :::
            case today_temperature<5:
            return array_cloths.around_zero;
            break;

      //5 to +15//
            case today_temperature<15:
            return array_cloths.offseason_feel;
            break;

            //5 to +15//
            case today_temperature<30:
            return array_cloths.summary_mood;
            break;

      // above +15
            case today_temperature<60:
            return array_cloths.too_hot;
            break;

            default:
           // return array_cloths.test
            console.log("Something is hapening:::");
            break;

          }
      }
          

    //console.log(check_temperature());

    /**** Checking for other weather conditions ...................*/

         // if rainning expand array by adding two elements
             // if sun is shining add other one
             // if windy add another one

    var div1 = document.createElement("div");
    //div1.style.width = "100px";
    //div1.style.height = "100px";
    //div1.style.background = "red";
    div1.style.color = "white";
    div1.style.display= "inline-block"
    //div1.innerHTML = "Hello";

   

      function create_checklist(){
      
        // document.body.appendChild(div1);
        cloths_need = check_temperature();
        cloths_need.forEach(element => {
         
          // create check boxes and set names using array names
        var chk_box = document.createElement("INPUT");
        chk_box.setAttribute("type", "checkbox");
        chk_box.innerText ="test"

        //style="display: inline-block"
        var chk_para = document.createElement("p");
        chk_para.innerText =element + '\u00a0' + '\u00a0';
        chk_para.style.display= "inline-block";

        // Create pictures under same name::
        

        image = document.createElement("img");
        image.src=element+".jpg"
        var src = document.getElementById("header");
        src.appendChild(image);



        document.getElementById("myDIV").appendChild(chk_box);
        document.getElementById("myDIV").appendChild(chk_para); 
        //document.body.appendChild(chk_para); 

        });
        

      }




      //*******************Animation*****************
/*
      var id = null;
function myMove() {
  var elem = document.getElementById("myAnimation");   
  var pos = 0;
  clearInterval(id);
  id = setInterval(frame, 10);
  function frame() {
    if (pos == 350) {
      clearInterval(id);
    } else {
      pos++; 
      elem.style.top = pos + 'px'; 
      elem.style.left = pos + 'px'; 
    }
  }
}
  */ 
  /*
      console.log("Today temperature is  " +today_temperature)
      image1.src ="winter_jacket.jpg";
      image1.style.height = '150px';
      image1.style.width = '150px';
      */

 // WE have to think about:
 // rain::
 // wind:
 //temperature::

 // how about switch cases for each?? 
 // might need to think about two options together : like what will happen if it is rainning and windy

 // check enum for possible status::
 


 

 // what to return::

 // where to return :::::


 </script>
</body>
</html>